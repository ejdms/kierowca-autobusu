(this["webpackJsonpkierowca-autobusu"]=this["webpackJsonpkierowca-autobusu"]||[]).push([[0],{12:function(e,a,n){},14:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),c=n(6),i=n.n(c),l=(n(12),n(1)),s=n(2),o=n(3),u=function(e){var a=e.children;return r.a.createElement("div",{className:"main-wrapper"},a)},m=function(e){var a=e.symbol,n=e.color,t=e.onHand,c=e.active;return r.a.createElement("div",{className:"card ".concat(n," ").concat(t?"on-hand":"on-table"," ").concat(c?"active":"")},a)},f=function(e){var a=e.name,n=e.cards,t=e.sips,c=e.canClickOnHand,i=e.click,l=(e.id,n.map((function(e,a){return r.a.createElement(m,{onHand:!0,symbol:e.symbol,active:e.active,color:e.color,key:a,id:e.id})})));return r.a.createElement("div",{className:"player-hand ".concat(c&&"clickable"),onClick:function(){c&&i()}},r.a.createElement("div",{className:"player-name"},a," ",r.a.createElement("span",null,"Sipps: ",t)),r.a.createElement("div",{className:"player-cards"},l))},d=function(e){var a=e.text,n=e.additionalClasses,t=e.click;return r.a.createElement("button",{onClick:t&&t,className:"btn ".concat(n||"")},a)},b=function(e){for(var a=e.btnText,n=e.canClickOnButton,t=e.cardsOnTableInRows,c=e.playersHands,i=e.handleClickOnNextCardBtn,l=e.giveSipsNumber,s=e.handleChangeSipsNumberToGive,o=e.sipsInfo,u=[],m=0;m<l;m++)u.push(r.a.createElement("option",{value:m+1,key:m},m+1));var f=o.map((function(e,a){return r.a.createElement("li",{key:a},"Player ",e.name," drink ",e.sips," ",1===e.sips?"sip":"sips")})),b=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Choose number of sips to give other player"),r.a.createElement("select",{className:"select",defaultValue:1,onChange:function(e){return s(e)}},u));return r.a.createElement("div",{className:"game-board"},r.a.createElement("div",{className:"table"},t),r.a.createElement("div",{className:"players-hands"},c),r.a.createElement("div",{className:"button"},r.a.createElement(d,{text:a,additionalClasses:"big",click:function(){n&&i()}}),r.a.createElement("div",{className:"info"},0!==l&&b,0!==o.length&&f)))},p=function(e){var a=e.game,n=e.setGame,c=e.players,i=e.setPlayers,u="Next card",d=!0,p=[],O=0,v=0,y=[],h=!1,E=Object(t.useState)(u),j=Object(o.a)(E,2),k=j[0],C=j[1],g=Object(t.useState)(d),w=Object(o.a)(g,2),N=w[0],P=w[1],T=Object(t.useState)(p),S=Object(o.a)(T,2),x=S[0],I=S[1],V=Object(t.useState)(O),G=Object(o.a)(V,2),H=G[0],K=G[1],L=Object(t.useState)(v),B=Object(o.a)(L,2),W=B[0],R=B[1],D=Object(t.useState)(y),A=Object(o.a)(D,2),F=A[0],J=A[1],M=Object(t.useState)(h),Q=Object(o.a)(M,2),U=Q[0],$=Q[1],_=function(){C(u),P(d),I(p)};Object(t.useEffect)((function(){return _(),function(){_()}}),[]);var q=function(){setTimeout((function(){n((function(e){return Object(s.a)({},e,{gameBoardScreenVisible:!1,kierowcaAutubusuScreenVisible:!0})}))}),1e3)};Object(t.useEffect)((function(){if(x.length){P(!1);var e=x[0].player,n=x[0].sips;i(Object(l.a)(c.map((function(a){return a.canClickOnHand=!(a.id===e.id),a})))),K(n),R(1)}else{P(!0),i(Object(l.a)(c.map((function(e){return e.canClickOnHand=!1,e})))),-1!==a.cardsOnTable.findIndex((function(e){return!e.active}))||q()}}),[x]),Object(t.useEffect)((function(){U&&q()}),[U]);var z=a.cardsOnTable.map((function(e){return r.a.createElement(m,{onHand:!1,symbol:e.symbol,color:e.color,key:e.id,active:e.active,action:e.action})})),X=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row row-1"},z.splice(0,1)),r.a.createElement("div",{className:"row row-2"},z.splice(0,2)),r.a.createElement("div",{className:"row row-3"},z.splice(0,3)),r.a.createElement("div",{className:"row row-4"},z.splice(0,4)),r.a.createElement("div",{className:"row row-5"},z.splice(0,5)),r.a.createElement("div",{className:"row row-1"},z.splice(0,1))),Y=c.map((function(e){return r.a.createElement(f,{cards:e.cards,name:e.name,sips:e.sips,id:e.id,key:e.id,canClickOnHand:e.canClickOnHand,click:function(){return function(e){if(x.length){var a=parseInt(W),n=c.map((function(n){return n.id===e&&(n.sips=n.sips+a),n}));i(Object(l.a)(n));var t=a===H?x.filter((function(e,a){return 0!==a})):x.map((function(e,n){return 0===n&&(e.sips=e.sips-a),e}));I(Object(l.a)(t)),K((function(e){return e-a})),R(1)}}(e.id)}})}));return r.a.createElement(b,{canClickOnButton:N,btnText:k,cardsOnTableInRows:X,playersHands:Y,handleClickOnNextCardBtn:function(){J([]);var e=a.cardsOnTable.findIndex((function(e){return!e.active}));if(-1!==e){var t=a.cardsOnTable[e],r=t.id,o=c.filter((function(e){var a=!1,n=t.symbol;if(e.cards.forEach((function(e){e.symbol===n&&(a=!0)})),a)return e}));o.length?o.forEach((function(e){Object(l.a)(e.cards).forEach((function(a,r){if(a.symbol===t.symbol)if("drink"===t.action.type){var o=c.map((function(a){if(a.id===e.id)if(a.sips=a.sips+t.action.number,-1!==F.findIndex((function(e){return e.name.toLowerCase()===a.name.toLowerCase()}))){var n=F.map((function(e){return e.name===a.name&&(e.sips=e.sips+t.action.number),e}));J(Object(l.a)(n))}else{var r={name:a.name,sips:t.action.number};J((function(e){return[].concat(Object(l.a)(e),[r])}))}return a}));i(Object(l.a)(o))}else if("give"===t.action.type)I((function(a){return[].concat(Object(l.a)(a),[{player:e,sips:t.action.number}])}));else if("kierowca"===t.action.type){n((function(a){return Object(s.a)({},a,{playersWithKierowca:[].concat(Object(l.a)(a.playersWithKierowca),[e])})})),I((function(a){return[].concat(Object(l.a)(a),[{player:e,sips:t.action.number}])}));var u=c.map((function(a){if(a.id===e.id)if(a.sips=a.sips+t.action.number,-1!==F.findIndex((function(e){return e.name.toLowerCase()===a.name.toLowerCase()}))){var n=F.map((function(e){return e.name===a.name&&(e.sips=e.sips+t.action.number),e}));J(Object(l.a)(n))}else{var r={name:a.name,sips:t.action.number};J((function(e){return[].concat(Object(l.a)(e),[r])}))}return a}));i(Object(l.a)(u))}}))})):"kierowca"===t.action.type&&$(!0);var u=a.cardsOnTable.map((function(e){return e.id===r&&(e.active=!0),e}));n((function(e){return Object(s.a)({},e,{cardsOnTable:Object(l.a)(u)})}))}},giveSipsNumber:H,handleChangeSipsNumberToGive:function(e){var a=e.target.value;R(a)},sipsInfo:F})},O=function(e){var a=e.type,n=void 0===a?"normal":a,c=e.name,i=e.id,l=e.handleAddPlayer,s=e.handleRemovePlayer,u=Object(t.useState)({name:""}),m=Object(o.a)(u,2),f=m[0],b=m[1],p=function(){return b({name:""})};return r.a.createElement("div",{className:"add-player-card ".concat(n)},"normal"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"name"},c),r.a.createElement(d,{text:"-",additionalClasses:"delete",click:function(){return s(i)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",value:f.name,onChange:function(e){return function(e){var a=e.target.value;b({name:a})}(e)},onKeyDown:function(e){return function(e){13===e.which&&(e.preventDefault(),l(f.name,p))}(e)},placeholder:"Name"}),r.a.createElement(d,{text:"+",additionalClasses:"add-new",click:function(){return l(f.name,p)}})))},v=function(e){var a=e.name,n=e.id,t=e.cards,r=void 0===t?[]:t,c=e.initialPhaseOneCompleted,i=void 0!==c&&c,l=e.initialPhaseTwoCompleted,s=void 0!==l&&l,o=e.sips,u=void 0===o?0:o,m=e.canClickOnHand;return{id:n,name:a,cards:r,initialPhaseOneCompleted:i,initialPhaseTwoCompleted:s,sips:u,canClickOnHand:void 0!==m&&m}},y=function(e){var a=e.game,n=e.setGame,t=e.players,c=e.setPlayers,i=a.numberOfPlayers,o=function(e){var a=t.filter((function(a){return a.id!==e}));c(Object(l.a)(a)),n((function(e){return Object(s.a)({},e,{numberOfPlayers:e.numberOfPlayers-1})}))},u=t.map((function(e){return r.a.createElement(O,{name:e.name,id:e.id,key:e.id,handleRemovePlayer:o})}));return r.a.createElement("div",{className:"start-screen"},r.a.createElement("div",{className:"filled"},r.a.createElement("div",{className:"upper"},u,i<20&&r.a.createElement(O,{type:"addNew",handleAddPlayer:function(e,a){var r=!0;if(t.length&&t.forEach((function(a){a.name.toLowerCase()===e.toLowerCase()&&(r=!1)})),e&&r){var o=v({name:e,id:i+1,cards:[]});c((function(e){return[].concat(Object(l.a)(e),[o])})),a(),n((function(e){return Object(s.a)({},e,{numberOfPlayers:e.numberOfPlayers+1})}))}}})),r.a.createElement("div",{className:"bottom"},r.a.createElement(d,{click:function(){a.numberOfPlayers>1&&n((function(e){return Object(s.a)({},e,{startScreenVisible:!1,gameInitialPhaseScreenVisible:!0})}))},text:"Start"}))))},h=function(e){e.game;var a=e.setGame,n=e.players,c=e.setPlayers,i={completed:!1,phase:1,currentPlayer:n[0],shouldChangeCurrentPlayer:!1,canClick:!0},u=Object(t.useState)(Object(s.a)({},i)),f=Object(o.a)(u,2),d=f[0],b=f[1],p=function(){b(Object(s.a)({},i))};Object(t.useEffect)((function(){return p(),function(){p()}}),[]);var O=d.phase,v=d.currentPlayer,y=d.shouldChangeCurrentPlayer,h=d.canClick;Object(t.useEffect)((function(){if(y){var e=v.id,t=n[n.length-1].id;if(e===t)a((function(e){return Object(s.a)({},e,{gameInitialPhaseScreenVisible:!1,gameBoardScreenVisible:!0})}));else{var r=n.findIndex((function(a){return a.id===e}))+1,c=n[r];b((function(e){return Object(s.a)({},e,{currentPlayer:c})}))}b((function(e){return Object(s.a)({},e,{shouldChangeCurrentPlayer:!1})}))}}),[O]);var E=function(e){if(h){var a=v.id;if("red"===e||"black"===e){var t=v.cards[0].color,r=n.map((function(n){return n.id===a&&(n.initialPhaseOneCompleted=!0,e!==t&&(n.sips=n.sips+1)),n}));c(Object(l.a)(r)),b((function(e){return Object(s.a)({},e,{phase:2})}))}else if("more"===e||"less"===e||"same"===e){var i=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],o=i.findIndex((function(e){return e===v.cards[0].symbol})),u=i.findIndex((function(e){return e===v.cards[1].symbol}))-o,m=!1;if(("more"===e&&u>0||"same"===e&&0===u||"less"===e&&u<0)&&(m=!0),m){var f=n.map((function(e){return e.id===a&&(e.initialPhaseTwoCompleted=!0),e}));c(Object(l.a)(f))}else{var d=n.map((function(e){return e.id===a&&(e.initialPhaseTwoCompleted=!0,e.sips=e.sips+1),e}));c(Object(l.a)(d))}b((function(e){return Object(s.a)({},e,{canClick:!1})})),setTimeout((function(){b((function(e){return Object(s.a)({},e,{phase:1,shouldChangeCurrentPlayer:!0,canClick:!0})}))}),1e3)}}},j=r.a.createElement("ul",null,1===d.phase?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){return E("red")}},"Red"),r.a.createElement("li",{onClick:function(){return E("black")}},"Black")):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){return E("more")}},"More"),r.a.createElement("li",{onClick:function(){return E("same")}},"Same"),r.a.createElement("li",{onClick:function(){return E("less")}},"Less"))),k=r.a.createElement("ul",null,v&&d.currentPlayer.cards.map((function(e,a){return r.a.createElement(m,{key:a,symbol:e.symbol,color:e.color,active:a%2?d.currentPlayer.initialPhaseTwoCompleted:d.currentPlayer.initialPhaseOneCompleted})})));return r.a.createElement("div",{className:"initial-phase"},r.a.createElement("div",{className:"current-player-name"},"Current player: ",v&&v.name),r.a.createElement("div",{className:"options"},j),r.a.createElement("div",{className:"cards"},k),r.a.createElement("div",{className:"sips-meter"},"Sips of current player: ",v&&v.sips))},E=n(4),j=n.n(E),k=null;try{k=n(!function(){var e=new Error("Cannot find module '../apiKeys.json'");throw e.code="MODULE_NOT_FOUND",e}())}catch(T){}var C=function(e){var a,n,t;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(k){r.next=2;break}return r.abrupt("return",{gender:null,accuracy:0});case 2:if(!(a=k.genderApi)){r.next=11;break}return n="https://gender-api.com/get?name=".concat(e,"&key=").concat(a),t=null,r.next=8,j.a.awrap(fetch(n).then((function(e){return e.json()})).then((function(e){return t=e})).catch((function(e){console.log("ERROR: "+e),t={gender:null,accuracy:0}})));case 8:return r.abrupt("return",t);case 11:return r.abrupt("return",{gender:null,accuracy:0});case 12:case"end":return r.stop()}}))},g=function(e){for(var a=Object(l.a)(e),n=0;n<15;n++)a.sort((function(){return Math.random()-.5}));return a},w=function(e){var a=e.game,n=e.players,c=e.setPlayers,i=e.handleGameReset,u=Object(l.a)(n),f={cardsInDeck:g(a.cardsInGame),playersWithKierowca:a.playersWithKierowca,currentPlayer:a.playersWithKierowca[0],phase:1,cardsOnTheTable:[],numberOfCardsLeft:a.cardsInGame.length,infoText:"",gameOver:!1,canClick:!0},b=Object(t.useState)(Object(s.a)({},f)),p=Object(o.a)(b,2),O=p[0],v=p[1],y=O.cardsInDeck,h=O.playersWithKierowca,E=O.currentPlayer,k=O.phase,w=O.cardsOnTheTable,N=O.numberOfCardsLeft,P=O.infoText,T=O.canClick,S=function(){v(Object(s.a)({},f))};Object(t.useEffect)((function(){return S(),function(){S()}}),[]);var x=y[0],I=E?E.id:null,V=function(){v((function(e){return Object(s.a)({},e,{cardsOnTheTable:[].concat(Object(l.a)(e.cardsOnTheTable),[x]),phase:e.phase+1})}))},G=function(){var e=u.map((function(e){return e.id===I&&(e.sips+=1),e}));c(Object(l.a)(e)),v((function(e){return Object(s.a)({},e,{cardsOnTheTable:[].concat(Object(l.a)(e.cardsOnTheTable),[x]),canClick:!1})})),setTimeout((function(){v((function(e){return Object(s.a)({},e,{cardsOnTheTable:[],phase:1,canClick:!0})}))}),1e3),H(!1)},H=function(e){var a,n,t,r,c,i,l;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=E.sips,n="",!e){o.next=10;break}return o.next=5,j.a.awrap(C(E.name));case 5:t=o.sent,r=t.gender,c=t.accuracy,n+=c<66?"Number of sips: ".concat(E.sips):"".concat("male"===r?"He":"She"," have total ").concat(a," ").concat(1===a?"sip":"sips"),o.next=14;break;case 10:i=P.split(""),l=i.findIndex((function(e){return/^[0-9]$/.test(e)})),i.splice(l,i.length-1),n=i.join("")+a;case 14:n&&v((function(e){return Object(s.a)({},e,{infoText:n})}));case 15:case"end":return o.stop()}}))},K=function(){v((function(e){return Object(s.a)({},e,{cardsInDeck:g(a.cardsInGame),playersWithKierowca:e.playersWithKierowca.filter((function(e,a){return 0!==a})),phase:1,cardsOnTheTable:[]})}))},L=function(){v((function(e){return Object(s.a)({},e,{cardsInDeck:0,numberOfCardsLeft:0})})),setTimeout((function(){v((function(e){return Object(s.a)({},e,{gameOver:!0})}))}),1e3)},B=function(e){if(T){if("black"===e||"red"===e){e===x.color?V():G()}else{var a=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],n=w[w.length-1],t=a.findIndex((function(e){return e===n.symbol})),r=a.findIndex((function(e){return e===x.symbol}))-t,c=!1;("more"===e&&r>0||"same"===e&&0===r||"less"===e&&r<0)&&(c=!0),c?V():G()}v((function(e){return Object(s.a)({},e,{cardsInDeck:e.cardsInDeck.filter((function(e,a){return 0!==a}))})}))}};Object(t.useEffect)((function(){6===k&&setTimeout((function(){h.length>1?K():L()}),1e3)}),[k]),Object(t.useEffect)((function(){E&&H(!0)}),[E]),Object(t.useEffect)((function(){y.length||(h.length?K():L())}),[y]),Object(t.useEffect)((function(){h.length?v((function(e){return Object(s.a)({},e,{currentPlayer:e.playersWithKierowca[0]})})):L()}),[h]),Object(t.useEffect)((function(){v((function(e){return Object(s.a)({},e,{numberOfCardsLeft:y.length})}))}),[y]),Object(t.useEffect)((function(){var e=u.map((function(e){return h.forEach((function(a){e.id===a.id&&(e.sips=a.sips)})),e}));c(Object(l.a)(e))}),[h]);var W="";if(O.gameOver){var R=r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{className:"player",key:e.id},r.a.createElement("h3",null,"Name: ",e.name),r.a.createElement("p",null,"Sips: ",e.sips))})));W=r.a.createElement("div",{className:"end-screen"},r.a.createElement("h1",null,"The End"),r.a.createElement(d,{text:"reset",additionalClasses:"upper",click:i}),r.a.createElement("div",{className:"scores"},r.a.createElement("h1",null,"Total scores"),r.a.createElement("ul",null,R)))}else{var D=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){return B("red")}},"Red"),r.a.createElement("li",{onClick:function(){return B("black")}},"Black")),A=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){return B("more")}},"More"),r.a.createElement("li",{onClick:function(){return B("same")}},"Same"),r.a.createElement("li",{onClick:function(){return B("less")}},"Less")),F=r.a.createElement("ul",null,1===k?D:A),J=w.map((function(e){return r.a.createElement(m,{symbol:e.symbol,key:e.id,id:e.id,color:e.color,active:!0})}));W=r.a.createElement("div",{className:"kierowca"},r.a.createElement("div",{className:"info-top"},"Current player: ".concat(E.name)),r.a.createElement("div",{className:"buttons"},F),r.a.createElement("div",{className:"cards"},J),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"info-1"},P),r.a.createElement("div",{className:"info-2"},"Number of cards left: ".concat(N))))}return r.a.createElement("div",{className:"kierowca-screen"},W)},N=function(e){return{id:e.id,symbol:e.symbol,color:e.color,onHand:e.onHand,active:e.active}},P=function(){var e={numberOfPlayers:0,cardsInGame:[],cardsOnTable:[],activeCard:null,startScreenVisible:!0,gameInitialPhaseScreenVisible:!1,gameBoardScreenVisible:!1,kierowcaAutubusuScreenVisible:!1,playersWithKierowca:[]},a=Object(t.useState)(Object(s.a)({},e)),n=Object(o.a)(a,2),c=n[0],i=n[1],m=Object(t.useState)([]),f=Object(o.a)(m,2),d=f[0],b=f[1],O=function(e){var a=[{id:1,symbol:"A"},{id:2,symbol:"K"},{id:3,symbol:"Q"},{id:4,symbol:"J"},{id:5,symbol:"10"},{id:6,symbol:"9"},{id:7,symbol:"8"},{id:8,symbol:"7"},{id:9,symbol:"6"},{id:10,symbol:"5"},{id:11,symbol:"4"},{id:12,symbol:"3"},{id:13,symbol:"2"}],n=[],t=[],r=16+2*c.numberOfPlayers,o=0;o=Math.floor(r/4),r%4!==0&&o++;for(var u=function(e){t=[].concat(Object(l.a)(t),Object(l.a)(a.filter((function(a){return a.id===e+1}))))},m=0;m<o;m++)u(m);for(var f=0,p=0;p<t.length;p++)for(var O=0;O<4;O++){var v=N({id:f+1,symbol:t[p].symbol,color:O%2?"red":"black",active:!1});n.push(v),f++}var y=g(n),h=Object(l.a)(y.splice(0,16)),E=Object(l.a)(y),j=h[h.length-1],k=!1;if(E.forEach((function(e){e.symbol===j.symbol&&(k=!0)})),!k)return e(e);var C=[].concat(Object(l.a)(h),Object(l.a)(E));i((function(e){return Object(s.a)({},e,{cardsInGame:Object(l.a)(C)})}));for(var w=Object(l.a)(h),P=0;P<c.numberOfPlayers;P++){var T=E.splice(0,2),S=Object(l.a)(d);S[P].cards=T,b(Object(l.a)(S))}var x=w.map((function(e,a){var n=null;return n=0===a?{type:"drink",number:1}:a<3?{type:"give",number:2}:a<6?{type:"drink",number:3}:a<10?{type:"give",number:4}:a<15?{type:"drink",number:5}:{type:"kierowca",number:6},e.action=n,e}));i((function(e){return Object(s.a)({},e,{cardsOnTable:x})}))};return Object(t.useEffect)((function(){c.startScreenVisible||O(O)}),[c.startScreenVisible]),r.a.createElement(u,null,c.startScreenVisible&&r.a.createElement(y,{game:c,setGame:i,players:d,setPlayers:b}),c.gameInitialPhaseScreenVisible&&r.a.createElement(h,{game:c,setGame:i,players:d,setPlayers:b}),c.gameBoardScreenVisible&&r.a.createElement(p,{game:c,setGame:i,players:d,setPlayers:b}),c.kierowcaAutubusuScreenVisible&&r.a.createElement(w,{game:c,setGame:i,players:d,setPlayers:b,handleGameReset:function(){i(Object(s.a)({},e)),b([])}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,a,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.e6392f32.chunk.js.map